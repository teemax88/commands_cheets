Декораторы в Python - это мощный инструмент, который позволяет изменять поведение функций или методов без изменения их исходного кода. Они используются для добавления функциональности к существующим функциям или методам. Декораторы часто используются, например, для логирования, проверки прав доступа, кэширования и других аспектов программы.

## Шаг 1: Создание простого декоратора
*Декоратор - это функция, которая принимает другую функцию в качестве аргумента и возвращает новую функцию. Вот пример простого декоратора:*
```python
def my_decorator(func):
    def wrapper():
        print("Что-то происходит перед вызовом функции")
        func()
        print("Что-то происходит после вызова функции")
    return wrapper
```

## Шаг 2: Использование декоратора
*Теперь мы можем использовать этот декоратор, чтобы изменить поведение другой функции. Декорируем функцию с помощью "@" перед именем декоратора:*
```python
@my_decorator
def say_hello():
    print("Привет, мир!")

say_hello()
```

*Этот код вызовет следующий вывод:*
```python
Что-то происходит перед вызовом функции
Привет, мир!
Что-то происходит после вызова функции
```

## Шаг 3: Передача аргументов в декоратор и обернутую функцию
*Чтобы сделать декоратор более полезным, мы можем передавать аргументы как в сам декоратор, так и в обернутую функцию:*
```python
def repeat_twice(func):
    def wrapper(*args, **kwargs):
        func(*args, **kwargs)
        func(*args, **kwargs)
    return wrapper

@repeat_twice
def greet(name):
    print(f"Привет, {name}!")

greet("Анна")
```

*Этот код вызовет следующий вывод:*
```python
Привет, Анна!
Привет, Анна!
```

## Шаг 4: Декораторы с параметрами
*Мы также можем создавать декораторы с параметрами. В этом случае, мы создаем две вложенные функции:*
```python
def repeat(num):
    def decorator(func):
        def wrapper(*args, **kwargs):
            for _ in range(num):
                func(*args, **kwargs)
        return wrapper
    return decorator

@repeat(3)
def say_hi():
    print("Привет!")

say_hi()
```

*Этот код вызовет следующий вывод:*
```python
Привет!
Привет!
Привет!
```
